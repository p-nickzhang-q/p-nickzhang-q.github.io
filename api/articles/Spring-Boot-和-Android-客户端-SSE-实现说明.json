{"title":"Spring Boot å’Œ Android å®¢æˆ·ç«¯ SSE å®ç°è¯´æ˜","uid":"4e5438c9e012a77cb97e209dfb4eefbc","slug":"Spring-Boot-å’Œ-Android-å®¢æˆ·ç«¯-SSE-å®ç°è¯´æ˜","date":"2024-12-09T07:58:01.000Z","updated":"2024-12-09T08:03:22.326Z","comments":true,"path":"api/articles/Spring-Boot-å’Œ-Android-å®¢æˆ·ç«¯-SSE-å®ç°è¯´æ˜.json","keywords":null,"cover":null,"content":"<h1 id=\"Spring-Boot-å’Œ-Android-å®¢æˆ·ç«¯-SSE-å®ç°è¯´æ˜\"><a href=\"#Spring-Boot-å’Œ-Android-å®¢æˆ·ç«¯-SSE-å®ç°è¯´æ˜\" class=\"headerlink\" title=\"Spring Boot å’Œ Android å®¢æˆ·ç«¯ SSE å®ç°è¯´æ˜\"></a>Spring Boot å’Œ Android å®¢æˆ·ç«¯ SSE å®ç°è¯´æ˜</h1><p>æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªåŸºäº Server-Sent Events (SSE) çš„æ¶ˆæ¯æ¨é€ç³»ç»Ÿï¼Œåç«¯ä½¿ç”¨ Spring Bootï¼Œå‰ç«¯ä½¿ç”¨ Android å®¢æˆ·ç«¯ã€‚ä»¥ä¸‹æ˜¯ç³»ç»Ÿçš„æ•´ä½“ç»“æ„å’Œå„ä¸ªéƒ¨åˆ†çš„è¯¦ç»†è¯´æ˜ã€‚</p>\n<h2 id=\"1-Spring-Boot-åç«¯å®ç°\"><a href=\"#1-Spring-Boot-åç«¯å®ç°\" class=\"headerlink\" title=\"1. Spring Boot åç«¯å®ç°\"></a>1. Spring Boot åç«¯å®ç°</h2><p>åç«¯é€šè¿‡ <code>SseEmitter</code> æ¥å®ç° SSE åŠŸèƒ½ã€‚ä¸»è¦åŠŸèƒ½æ˜¯ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯ç»´æŠ¤ä¸€ä¸ª <code>SseEmitter</code> å®ä¾‹ï¼Œé€šè¿‡ <code>SseEmitter</code> è¿›è¡Œæ¶ˆæ¯æ¨é€ã€‚</p>\n<h3 id=\"æ ¸å¿ƒä»£ç è¯´æ˜\"><a href=\"#æ ¸å¿ƒä»£ç è¯´æ˜\" class=\"headerlink\" title=\"æ ¸å¿ƒä»£ç è¯´æ˜\"></a>æ ¸å¿ƒä»£ç è¯´æ˜</h3><h4 id=\"1-1-è®¢é˜…æ¥å£\"><a href=\"#1-1-è®¢é˜…æ¥å£\" class=\"headerlink\" title=\"1.1 è®¢é˜…æ¥å£\"></a>1.1 è®¢é˜…æ¥å£</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> clients = ConcurrentHashMap&lt;String, SseEmitter&gt;()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">subscribe</span><span class=\"params\">(clientId: <span class=\"type\">String</span>)</span></span>: SseEmitter &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> emitter = SseEmitter(<span class=\"number\">60</span> * <span class=\"number\">60_000L</span>) <span class=\"comment\">// 1å°æ—¶è¶…æ—¶</span></span><br><span class=\"line\">    clients[clientId] = emitter</span><br><span class=\"line\">    emitter.onCompletion &#123; &#125;</span><br><span class=\"line\">    emitter.onTimeout &#123; clients.remove(clientId) &#125;</span><br><span class=\"line\">    emitter.onError &#123; clients.remove(clientId) &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> emitter</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>clients</code> æ˜¯ä¸€ä¸ª <code>ConcurrentHashMap</code>ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰åœ¨çº¿å®¢æˆ·ç«¯çš„ <code>SseEmitter</code> å®ä¾‹ï¼Œ<code>clientId</code> ä½œä¸ºå®¢æˆ·ç«¯çš„æ ‡è¯†ã€‚</li>\n<li><code>subscribe</code> æ–¹æ³•ä¼šä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>SseEmitter</code> å®ä¾‹ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´ä¸º 1 å°æ—¶ï¼Œå¹¶ä¸”åœ¨äº‹ä»¶è¶…æ—¶æˆ–é”™è¯¯æ—¶ç§»é™¤è¯¥å®¢æˆ·ç«¯ã€‚</li>\n</ul>\n<h4 id=\"1-2-å‘é€æ¶ˆæ¯æ¥å£\"><a href=\"#1-2-å‘é€æ¶ˆæ¯æ¥å£\" class=\"headerlink\" title=\"1.2 å‘é€æ¶ˆæ¯æ¥å£\"></a>1.2 å‘é€æ¶ˆæ¯æ¥å£</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">val</span> RemoveClient = <span class=\"string\">&quot;RemoveClient&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">sendEvent</span><span class=\"params\">(clientId: <span class=\"type\">String</span>, message: <span class=\"type\">String</span>)</span></span>: String &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> emitter = clients[clientId]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">if</span> (emitter != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">when</span> (message) &#123;</span><br><span class=\"line\">                RemoveClient -&gt; &#123;</span><br><span class=\"line\">                    clients.remove(clientId)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">else</span> -&gt; &#123;</span><br><span class=\"line\">                    emitter.send(SseEmitter.event().name(<span class=\"string\">&quot;message&quot;</span>).<span class=\"keyword\">data</span>(message))</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"string\">&quot;Message sent&quot;</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (e: IOException) &#123;</span><br><span class=\"line\">            clients.remove(clientId)</span><br><span class=\"line\">            <span class=\"string\">&quot;Failed to send message&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;Client not found&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>sendEvent</code> æ–¹æ³•ç”¨äºå‘æŒ‡å®šå®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ã€‚</li>\n<li>æ ¹æ®ä¸åŒçš„æ¶ˆæ¯ç±»å‹ï¼Œåç«¯ä¼šé‡‡å–ç›¸åº”çš„æ“ä½œï¼Œæ¯”å¦‚ç§»é™¤å®¢æˆ·ç«¯æˆ–æ¨é€æ¶ˆæ¯ã€‚</li>\n</ul>\n<h2 id=\"2-Android-å®¢æˆ·ç«¯å®ç°\"><a href=\"#2-Android-å®¢æˆ·ç«¯å®ç°\" class=\"headerlink\" title=\"2. Android å®¢æˆ·ç«¯å®ç°\"></a>2. Android å®¢æˆ·ç«¯å®ç°</h2><p>Android å®¢æˆ·ç«¯é€šè¿‡ <code>RealEventSource</code> æ¥æ¥æ”¶ SSE äº‹ä»¶ï¼Œå¹¶æ ¹æ®æ¶ˆæ¯å†…å®¹æ‰§è¡Œå¯¹åº”çš„æ“ä½œã€‚</p>\n<h3 id=\"æ ¸å¿ƒä»£ç è¯´æ˜-1\"><a href=\"#æ ¸å¿ƒä»£ç è¯´æ˜-1\" class=\"headerlink\" title=\"æ ¸å¿ƒä»£ç è¯´æ˜\"></a>æ ¸å¿ƒä»£ç è¯´æ˜</h3><h4 id=\"2-1-å®¢æˆ·ç«¯è¿æ¥\"><a href=\"#2-1-å®¢æˆ·ç«¯è¿æ¥\" class=\"headerlink\" title=\"2.1 å®¢æˆ·ç«¯è¿æ¥\"></a>2.1 å®¢æˆ·ç«¯è¿æ¥</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">enum</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SSEMessage</span>(<span class=\"keyword\">val</span> func: <span class=\"keyword\">suspend</span> () -&gt; <span class=\"built_in\">Unit</span>) &#123;</span><br><span class=\"line\">    Logout(&#123;</span><br><span class=\"line\">        mainVM.logout()</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    RemoveClient(&#123;</span><br><span class=\"line\">        VehicleApi.service.sendEvent(mainVM.user.id!!, RemoveClient.name)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">connect</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> request: Request = Request.Builder()</span><br><span class=\"line\">        .url(<span class=\"string\">&quot;<span class=\"subst\">$&#123;baseUrl&#125;</span>api/v1/em/vehicleauth/subscribe/<span class=\"subst\">$&#123;mainVM.user.id!!&#125;</span>&quot;</span>)</span><br><span class=\"line\">        .header(STORAGE_AUTHORIZATION, SpUtils.token)</span><br><span class=\"line\">        .build()</span><br><span class=\"line\"></span><br><span class=\"line\">    realEventSource = RealEventSource(request, <span class=\"keyword\">object</span> : EventSourceListener() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onEvent</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">            eventSource: <span class=\"type\">EventSource</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">            id: <span class=\"type\">String</span>?,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">            type: <span class=\"type\">String</span>?,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">            <span class=\"keyword\">data</span>: <span class=\"type\">String</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">        )</span></span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>.onEvent(eventSource, id, type, <span class=\"keyword\">data</span>)</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                SSEMessage.valueOf(<span class=\"keyword\">data</span>)</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (e: Exception) &#123;</span><br><span class=\"line\">                <span class=\"literal\">null</span></span><br><span class=\"line\">            &#125;?.apply &#123;</span><br><span class=\"line\">                activity.lifecycleScope.launch &#123;</span><br><span class=\"line\">                    func()</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onClosed</span><span class=\"params\">(eventSource: <span class=\"type\">EventSource</span>)</span></span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>.onClosed(eventSource)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onFailure</span><span class=\"params\">(eventSource: <span class=\"type\">EventSource</span>, t: <span class=\"type\">Throwable</span>?, response: <span class=\"type\">Response</span>?)</span></span> \t\t &#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>.onFailure(eventSource, t, response)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onOpen</span><span class=\"params\">(eventSource: <span class=\"type\">EventSource</span>, response: <span class=\"type\">Response</span>)</span></span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>.onOpen(eventSource, response)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    realEventSource.connect(client)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>connect</code> æ–¹æ³•ç”¨äºå»ºç«‹ä¸æœåŠ¡å™¨çš„ SSE è¿æ¥ã€‚</li>\n<li><code>RealEventSource</code> æ˜¯ <code>OkHttp</code> çš„ä¸€ä¸ªæ‰©å±•ç±»ï¼Œèƒ½å¤Ÿå¤„ç† SSE åè®®ã€‚</li>\n<li>åœ¨æ¥æ”¶åˆ°äº‹ä»¶æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šæ ¹æ®äº‹ä»¶çš„ <code>data</code> å­—æ®µæ¥è§£ææ¶ˆæ¯ç±»å‹ï¼ˆå¦‚ <code>Logout</code>ã€<code>RemoveClient</code>ï¼‰ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</li>\n</ul>\n<h4 id=\"2-2-äº‹ä»¶å¤„ç†\"><a href=\"#2-2-äº‹ä»¶å¤„ç†\" class=\"headerlink\" title=\"2.2 äº‹ä»¶å¤„ç†\"></a>2.2 äº‹ä»¶å¤„ç†</h4><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">enum</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SSEMessage</span>(<span class=\"keyword\">val</span> func: <span class=\"keyword\">suspend</span> () -&gt; <span class=\"built_in\">Unit</span>) &#123;</span><br><span class=\"line\">    Logout(&#123;</span><br><span class=\"line\">        mainVM.logout()</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    RemoveClient(&#123;</span><br><span class=\"line\">        VehicleApi.service.sendEvent(mainVM.user.id!!, RemoveClient.name)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>SSEMessage</code> æšä¸¾ç±»å®šä¹‰äº†ä¸¤ç§æ¶ˆæ¯ç±»å‹ï¼š<ul>\n<li><code>Logout</code>: è§¦å‘ç”¨æˆ·ç™»å‡ºæ“ä½œã€‚</li>\n<li><code>RemoveClient</code>: é€šçŸ¥æœåŠ¡å™¨ç§»é™¤å®¢æˆ·ç«¯ã€‚</li>\n</ul>\n</li>\n<li>æ¯ä¸ªæ¶ˆæ¯ç±»å‹å…³è”ä¸€ä¸ªæŒ‚èµ·å‡½æ•° (<code>func</code>)ï¼Œè¯¥å‡½æ•°ä¼šåœ¨æ¥æ”¶åˆ°äº‹ä»¶æ—¶æ‰§è¡Œã€‚</li>\n</ul>\n<h2 id=\"3-ä½¿ç”¨è¯´æ˜\"><a href=\"#3-ä½¿ç”¨è¯´æ˜\" class=\"headerlink\" title=\"3. ä½¿ç”¨è¯´æ˜\"></a>3. ä½¿ç”¨è¯´æ˜</h2><h3 id=\"3-1-åç«¯é…ç½®\"><a href=\"#3-1-åç«¯é…ç½®\" class=\"headerlink\" title=\"3.1 åç«¯é…ç½®\"></a>3.1 åç«¯é…ç½®</h3><p>åœ¨ Spring Boot åç«¯ä¸­ï¼Œé€šè¿‡ <code>SseEmitter</code> å®ç°äº† SSE åŠŸèƒ½ã€‚å‰ç«¯åªéœ€è¦è°ƒç”¨ <code>subscribe</code> æ–¹æ³•æ¥è®¢é˜…ç‰¹å®šå®¢æˆ·ç«¯ï¼Œç„¶åä½¿ç”¨ <code>sendEvent</code> æ–¹æ³•å‘é€æ¶ˆæ¯ã€‚</p>\n<h3 id=\"3-2-å®¢æˆ·ç«¯é…ç½®\"><a href=\"#3-2-å®¢æˆ·ç«¯é…ç½®\" class=\"headerlink\" title=\"3.2 å®¢æˆ·ç«¯é…ç½®\"></a>3.2 å®¢æˆ·ç«¯é…ç½®</h3><p>åœ¨ Android å®¢æˆ·ç«¯ä¸­ï¼Œé€šè¿‡ <code>RealEventSource</code> ç±»æ¥æ”¶æ¥è‡ªåç«¯çš„ SSE æ¶ˆæ¯ï¼Œå¹¶æ ¹æ®æ¶ˆæ¯ç±»å‹æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼ˆå¦‚ç™»å‡ºæˆ–ç§»é™¤å®¢æˆ·ç«¯ï¼‰ã€‚å®¢æˆ·ç«¯è¿æ¥ä¼šåœ¨ <code>connect</code> æ–¹æ³•ä¸­å»ºç«‹ï¼Œæ¶ˆæ¯æ¥æ”¶åä¼šæ ¹æ® <code>SSEMessage</code> æšä¸¾ç±»å‹æ¥è§¦å‘ä¸åŒçš„æ“ä½œã€‚</p>\n<h2 id=\"4-æ€»ç»“\"><a href=\"#4-æ€»ç»“\" class=\"headerlink\" title=\"4. æ€»ç»“\"></a>4. æ€»ç»“</h2><p>æœ¬å®ç°é€šè¿‡ SSE åè®®å®ç°äº†å®æ—¶æ¶ˆæ¯æ¨é€ï¼Œç»“åˆäº† Spring Boot åç«¯å’Œ Android å®¢æˆ·ç«¯ã€‚åç«¯ä½¿ç”¨ <code>SseEmitter</code> æ¥å¤„ç†ä¸å¤šä¸ªå®¢æˆ·ç«¯çš„è¿æ¥ï¼Œè€Œå®¢æˆ·ç«¯ä½¿ç”¨ <code>RealEventSource</code> æ¥æ”¶å¹¶å¤„ç†äº‹ä»¶ã€‚é€šè¿‡æ­¤æ–¹å¼ï¼Œå‰åç«¯å®ç°äº†å®æ—¶é€šä¿¡ï¼Œç¡®ä¿ç³»ç»Ÿèƒ½å¤ŸåŠæ—¶å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>\n<h3 id=\"å…³é”®ç‚¹\"><a href=\"#å…³é”®ç‚¹\" class=\"headerlink\" title=\"å…³é”®ç‚¹\"></a>å…³é”®ç‚¹</h3><ul>\n<li><strong>åç«¯ä½¿ç”¨ <code>SseEmitter</code></strong> å®ç° SSE æ¶ˆæ¯æ¨é€ã€‚</li>\n<li><strong>å®¢æˆ·ç«¯ä½¿ç”¨ <code>RealEventSource</code></strong> æ¥æ”¶å®æ—¶äº‹ä»¶å¹¶å¤„ç†ã€‚</li>\n<li><strong>æ¶ˆæ¯ç±»å‹é€šè¿‡æšä¸¾ <code>SSEMessage</code> å®šä¹‰</strong>ï¼Œå¹¶ç»“åˆæŒ‚èµ·å‡½æ•°æ‰§è¡Œä¸åŒçš„æ“ä½œã€‚</li>\n</ul>\n<p>è¿™æ ·å°±å®ç°äº†ä¸€ä¸ªé«˜æ•ˆã€å®æ—¶çš„æ¶ˆæ¯æ¨é€ç³»ç»Ÿï¼Œé€‚ç”¨äºéœ€è¦å®æ—¶é€šçŸ¥å’Œæ›´æ–°çš„åœºæ™¯ã€‚</p>\n","feature":true,"text":"Spring Boot å’Œ Android å®¢æˆ·ç«¯ SSE å®ç°è¯´æ˜æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªåŸºäº Server-Sent Events (SSE) çš„æ¶ˆæ¯æ¨é€ç³»ç»Ÿï¼Œåç«¯...","permalink":"/post/Spring-Boot-å’Œ-Android-å®¢æˆ·ç«¯-SSE-å®ç°è¯´æ˜","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"Spring Boot","slug":"Spring-Boot","count":1,"path":"api/categories/Spring-Boot.json"},{"name":"SSE","slug":"Spring-Boot/SSE","count":1,"path":"api/categories/Spring-Boot/SSE.json"},{"name":"Android","slug":"Spring-Boot/SSE/Android","count":1,"path":"api/categories/Spring-Boot/SSE/Android.json"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","count":1,"path":"api/tags/Spring-Boot.json"},{"name":"SSE","slug":"SSE","count":1,"path":"api/tags/SSE.json"},{"name":"Android","slug":"Android","count":1,"path":"api/tags/Android.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Spring-Boot-%E5%92%8C-Android-%E5%AE%A2%E6%88%B7%E7%AB%AF-SSE-%E5%AE%9E%E7%8E%B0%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">Spring Boot å’Œ Android å®¢æˆ·ç«¯ SSE å®ç°è¯´æ˜</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-Spring-Boot-%E5%90%8E%E7%AB%AF%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">1. Spring Boot åç«¯å®ç°</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">æ ¸å¿ƒä»£ç è¯´æ˜</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-%E8%AE%A2%E9%98%85%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">1.1 è®¢é˜…æ¥å£</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-2-%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">1.2 å‘é€æ¶ˆæ¯æ¥å£</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-Android-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">2. Android å®¢æˆ·ç«¯å®ç°</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%E8%AF%B4%E6%98%8E-1\"><span class=\"toc-text\">æ ¸å¿ƒä»£ç è¯´æ˜</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-1-%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">2.1 å®¢æˆ·ç«¯è¿æ¥</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-2-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86\"><span class=\"toc-text\">2.2 äº‹ä»¶å¤„ç†</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">3. ä½¿ç”¨è¯´æ˜</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-1-%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">3.1 åç«¯é…ç½®</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-2-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">3.2 å®¢æˆ·ç«¯é…ç½®</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">4. æ€»ç»“</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%94%AE%E7%82%B9\"><span class=\"toc-text\">å…³é”®ç‚¹</span></a></li></ol></li></ol></li></ol>","author":{"name":"zhangyida","slug":"blog-author","avatar":"https://picx.zhimg.com/v2-4a69a7f62af5158587806ddf5ec780e6_xl.jpg","link":"/","description":"<p>æ²¡æœ‰è¿‡ä¸äº†çš„å‘,åªæœ‰åƒä¸å®Œçš„è‹¦</p>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"æ–‡ä»¶æ ‡ç­¾ç®¡ç†å™¨","uid":"41881a9e23e37779fa5f8aab973b895f","slug":"æ–‡ä»¶æ ‡ç­¾ç®¡ç†å™¨","date":"2024-11-23T08:06:49.000Z","updated":"2024-12-09T08:01:42.381Z","comments":true,"path":"api/articles/æ–‡ä»¶æ ‡ç­¾ç®¡ç†å™¨.json","keywords":null,"cover":"https://raw.githubusercontent.com/PKief/vscode-material-icon-theme/ec559a9f6bfd399b82bb44393651661b08aaf7ba/icons/folder-markdown-open.svg","text":" FILE-TAG-MANAGER-APP â¯ REPLACE-ME ğŸ”— Table of Contents ğŸ“ Overview ğŸ‘¾ Features ğŸ“ P...","permalink":"/post/æ–‡ä»¶æ ‡ç­¾ç®¡ç†å™¨","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"å·¥å…·","slug":"å·¥å…·","count":1,"path":"api/categories/å·¥å…·.json"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","count":1,"path":"api/tags/å·¥å…·.json"}],"author":{"name":"zhangyida","slug":"blog-author","avatar":"https://picx.zhimg.com/v2-4a69a7f62af5158587806ddf5ec780e6_xl.jpg","link":"/","description":"<p>æ²¡æœ‰è¿‡ä¸äº†çš„å‘,åªæœ‰åƒä¸å®Œçš„è‹¦</p>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}